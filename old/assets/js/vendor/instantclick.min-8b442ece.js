var InstantClick=function(t,e){function n(t){var e=t.indexOf("#");return 0>e?t:t.substr(0,e)}function r(t){for(;"A"!=t.nodeName;)t=t.parentNode;return t}function i(t){do{if(!t.hasAttribute)break;if(t.hasAttribute("data-instant"))return!1;if(t.hasAttribute("data-no-instant"))return!0}while(t=t.parentNode);return!1}function a(t){do{if(!t.hasAttribute)break;if(t.hasAttribute("data-no-instant"))return!1;if(t.hasAttribute("data-instant"))return!0}while(t=t.parentNode);return!1}function o(t,e){for(var n=0;n<W[t].length;n++)W[t][n](e)}function s(e,r,i,a){if(t.title=e,t.documentElement.replaceChild(r,t.body),i){history.pushState(null,null,i);var s=i.indexOf("#"),d=s>-1&&t.getElementById(i.substr(s+1)),l=0;if(d)for(;d.offsetParent;)l+=d.offsetTop,d=d.offsetParent;scrollTo(0,l),T=n(i)}else scrollTo(0,a);m(),K.done(),o("change",!1)}function d(){I=!1,S=!1}function l(t){p(r(t.target).href)}function f(t){var e=r(t.target);e.addEventListener("mouseout",h),k?(E=e.href,w=setTimeout(p,k)):p(e.href)}function c(t){var e=r(t.target);x?e.removeEventListener("mousedown",l):e.removeEventListener("mouseover",f),p(e.href)}function u(t){t.which>1||t.metaKey||t.ctrlKey||(t.preventDefault(),g(r(t.target).href))}function h(){return w?(clearTimeout(w),void(w=!1)):void(I&&!S&&(L.abort(),d()))}function v(){if(!(L.readyState<4)&&0!=L.status){if(D.ready=+new Date-D.start,o("receive"),L.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var e=t.implementation.createHTMLDocument("");e.documentElement.innerHTML=L.responseText,O=e.title,N=e.body;var r=n(H);Y[r]={body:N,title:O,scrollY:r in Y?Y[r].scrollY:0};for(var i,a,s=e.head.children,d=0,l=s.length-1;l>=0;l--)if(i=s[l],i.hasAttribute("data-instant-track")){a=i.getAttribute("href")||i.getAttribute("src")||i.innerHTML;for(var f=z.length-1;f>=0;f--)z[f]==a&&d++}d!=z.length&&(B=!0)}else B=!0;S&&(S=!1,g(H))}}function m(r){for(var o,s=t.getElementsByTagName("a"),d=e.protocol+"//"+e.host,h=s.length-1;h>=0;h--)o=s[h],o.target||o.hasAttribute("download")||0!=o.href.indexOf(d+"/")||o.href.indexOf("#")>-1&&n(o.href)==T||(A?!a(o):i(o))||(o.addEventListener("touchstart",c),x?o.addEventListener("mousedown",l):o.addEventListener("mouseover",f),o.addEventListener("click",u));if(!r){var v,m,p,g,y=t.body.getElementsByTagName("script");for(h=0,j=y.length;h<j;h++)v=y[h],v.hasAttribute("data-no-instant")||(m=t.createElement("script"),v.src&&(m.src=v.src),v.innerHTML&&(m.innerHTML=v.innerHTML),p=v.parentNode,g=v.nextSibling,p.removeChild(v),p.insertBefore(m,g))}}function p(t){!x&&"display"in D&&+new Date-(D.start+D.display)<100||(w&&(clearTimeout(w),w=!1),t||(t=E),(!I||t!=H&&!S)&&(I=!0,S=!1,H=t,N=!1,B=!1,D={start:+new Date},o("fetch"),L.open("GET",t),L.send()))}function g(t){return"display"in D||(D.display=+new Date-D.start),w?H&&H!=t?void(e.href=t):(p(t),K.start(0,!0),o("wait"),void(S=!0)):!I||S?void(e.href=t):B?void(e.href=H):N?(Y[T].scrollY=pageYOffset,d(),void s(O,N,H)):(K.start(0,!0),o("wait"),void(S=!0))}function y(){if(!T){if(!P)return void o("change",!0);for(var r=arguments.length-1;r>=0;r--){var i=arguments[r];i===!0?A=!0:"mousedown"==i?x=!0:"number"==typeof i&&(k=i)}T=n(e.href),Y[T]={body:t.body,title:t.title,scrollY:pageYOffset};for(var a,d,l=t.head.children,r=l.length-1;r>=0;r--)a=l[r],a.hasAttribute("data-instant-track")&&(d=a.getAttribute("href")||a.getAttribute("src")||a.innerHTML,z.push(d));L=new XMLHttpRequest,L.addEventListener("readystatechange",v),m(!0),K.init(),o("change",!0),addEventListener("popstate",function(){var t=n(e.href);if(t!=T){if(!(t in Y))return void(e.href=e.href);Y[T].scrollY=pageYOffset,T=t,s(Y[t].title,Y[t].body,!1,Y[t].scrollY)}})}}function b(t,e){W[t].push(e)}var T,E,w,L,A,x,k,M=navigator.userAgent,C="createTouch"in t,Y={},H=!1,O=!1,B=!1,N=!1,D={},I=!1,S=!1,z=[],W={fetch:[],receive:[],wait:[],change:[]},K=function(){function e(){d=t.createElement("div"),d.id="instantclick",l=t.createElement("div"),l.id="instantclick-bar",l.className="instantclick-bar",d.appendChild(l);var e=["Webkit","Moz","O"];if(f="transform",!(f in l.style))for(var n=0;3>n;n++)e[n]+"Transform"in l.style&&(f=e[n]+"Transform");var r="transition";if(!(r in l.style))for(var n=0;3>n;n++)e[n]+"Transition"in l.style&&(r="-"+e[n].toLowerCase()+"-"+r);var i=t.createElement("style");i.innerHTML="#instantclick{position:"+(C?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+r+":opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;"+r+":all .25s}",t.head.appendChild(i),C&&(s(),addEventListener("resize",s),addEventListener("scroll",s))}function n(e,n){c=e,t.getElementById(d.id)&&t.body.removeChild(d),d.style.opacity="1",t.getElementById(d.id)&&t.body.removeChild(d),a(),n&&setTimeout(r,0),clearTimeout(u),u=setTimeout(i,500)}function r(){c=10,a()}function i(){c+=1+2*Math.random(),c>=98?c=98:u=setTimeout(i,500),a()}function a(){l.style[f]="translate("+c+"%)",t.getElementById(d.id)||t.body.appendChild(d)}function o(){return t.getElementById(d.id)?(clearTimeout(u),c=100,a(),void(d.style.opacity="0")):(n(100==c?0:c),void setTimeout(o,0))}function s(){d.style.left=pageXOffset+"px",d.style.width=innerWidth+"px",d.style.top=pageYOffset+"px";var t="orientation"in window&&90==Math.abs(orientation),e=innerWidth/screen[t?"height":"width"]*2;d.style[f]="scaleY("+e+")"}var d,l,f,c,u;return{init:e,start:n,done:o}}(),P="pushState"in history&&(!M.match("Android")||M.match("Chrome/"))&&"file:"!=e.protocol;return{supported:P,init:y,on:b}}(document,location);
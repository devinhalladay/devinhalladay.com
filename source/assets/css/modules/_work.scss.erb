.project {
  margin-top: .6em;

  @media screen and (max-width: 754px) {
    padding-bottom: $baseline / 2;
  }

  @media screen and (max-width: 754px) {
    a:hover img {
      margin-top: 0;

      transition: .4s cubic-bezier(.165, .84, .44, 1);

      filter: grayscale(0);
    }
  }

  a {
    text-decoration: none;

    .project--overlay {
      @media screen and (max-width: 754px) {
        display: none;
      }

      h4 {
        text-align: center;

        color: $white;

        font-weight: 600;
      }
    }

    figure {
      &::before {
        position: absolute;
        z-index: 700;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;

        display: block;

        content: '';
        cursor: pointer;
        transition: .4s cubic-bezier(.165, .84, .44, 1);

        background: rgba($color--accent, 0);

        @media screen and (max-width: 754px) {
          display: none;
        }
      }
    }

    &:hover {
      .project--overlay {
        visibility: visible;

        opacity: 1;

        @media screen and (max-width: 754px) {
          display: none;
        }
      }

      img {
        transition: .4s cubic-bezier(.165, .84, .44, 1);

        filter: grayscale(100%);

        @media screen and (max-width: 754px) {
          filter: grayscale(0);
        }
      }

      figure {
        &::before {
          transition: .4s cubic-bezier(.165, .84, .44, 1);

          background: rgba($color--accent, .94);

          @media screen and (max-width: 754px) {
            display: none;
          }
        }
      }

      h2 {
        z-index: 900;

        transition: .4s cubic-bezier(.165, .84, .44, 1);
        text-decoration: none;

        opacity: 1;
        color: $white;

        @media screen and (max-width: 754px) {
          display: none;
        }
      }
    }

    h2 {
      z-index: 900;
      top: 2em;

      display: block;

      width: 100%;
      margin: 0;

      transition: .4s cubic-bezier(.165, .84, .44, 1);
      text-align: center;

      opacity: 0;

      font-weight: 500;
      // position: absolute;
    }

    figure {
      img {
        z-index: 1;

        display: block;

        width: 100%;
        margin: -3em 0 0;
        padding: 0;
      }
    }
  }
}

.project__intro {
  margin-top: -.1em;

  text-indent: 0;

  font-family: $font--sans-serif;
  font-size: 1.1rem;

  @media (max-width: 500px) {
    font-size: 1rem;
  }
}

// .page__project {
//   figure img {
//     border: 1px solid $color--lighter-grey;
//   }
// }
//
// .project-$i {
//   color: #333;
// }

<% posts_by_weight.each_with_index do |project, index| %>
  .project-<%= index %> {
    a:hover figure::before {
      background: rgba(<%= project.data.color %>, 0.94);
      transition: 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    }
  }
<% end %>
